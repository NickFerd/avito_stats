# avito_stats
Веб-сервис для отслеживания количества объявлений в Авито по определенному поисковому запросу и локации. 
  
Вариант реализации тестового задания Авито в команду Market Intelligence   
Требования описаны здесь: [Задание](TASK.md)
-----

__Используемые технологии__:
- FastApi + uvicorn
- celery (в качестве исполнителя задач)
- celery-beat + RedBeatScheduler (Планировщик задач)
- redis (для хранения расписания задач и статуса выполнения)
- postgresql + sqlalchemy ORM (хранение результатов и пар)
- flower (для мониторинга задач)
- grafana (для визуализации работы сервиса, с преднастроенными дашбордами и источником данных)

Все сервисы описаны в файле docker-compose.yml и запускаются командой:  
`docker-compose up -d --build`  

Веб-сервис имеет спецификацию в формате Swagger/OpenAPI [Спецификация](openapi.yaml)

---
__Получение данных__:  
После анализа трафика с сайта avito был найден запрос, позволяющий получить количество объявлений, а также их список.
https://www.avito.ru/web/1/js/items?locationId=662210&name=велосипеды
Данный запрос использует параметр locationId. Данные по соответсвию имени локации и ее id удалось найти на сайте:  
https://rest-app.net/api 



